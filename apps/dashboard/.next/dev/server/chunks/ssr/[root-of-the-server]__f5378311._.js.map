{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tr/Desktop/flagship/apps/dashboard/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps } from 'firebase/app';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { getFirestore } from 'firebase/firestore';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n};\r\n\r\n// Initialize Firebase (singleton pattern)\r\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\r\n\r\nexport const auth = getAuth(app);\r\nexport const db = getFirestore(app);\r\nexport default app;\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,0CAA0C;AAC1C,MAAM,MAAM,IAAA,kMAAO,IAAG,MAAM,KAAK,IAAI,IAAA,wMAAa,EAAC,kBAAkB,IAAA,kMAAO,GAAE,CAAC,EAAE;AAE1E,MAAM,OAAO,IAAA,oMAAO,EAAC;AACrB,MAAM,KAAK,IAAA,wMAAY,EAAC;uCAChB"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tr/Desktop/flagship/apps/dashboard/lib/firestore.ts"],"sourcesContent":["import { \r\n  collection, \r\n  addDoc, \r\n  serverTimestamp, \r\n  doc, \r\n  setDoc,\r\n  query,\r\n  where,\r\n  getDocs\r\n} from 'firebase/firestore';\r\nimport { db } from './firebase';\r\n\r\n// Collection names\r\nexport const COLLECTIONS = {\r\n  ORGANIZATIONS: 'organizations',\r\n  ORGANIZATION_MEMBERS: 'organization_members',\r\n  PROJECTS: 'projects',\r\n  ENVIRONMENTS: 'environments',\r\n  FEATURE_FLAGS: 'feature_flags',\r\n  FLAG_VALUES: 'flag_values',\r\n  API_KEYS: 'api_keys',\r\n  AUDIT_LOGS: 'audit_logs',\r\n} as const;\r\n\r\n// Organization functions\r\nexport async function createOrganization(data: {\r\n  name: string;\r\n  slug: string;\r\n  createdBy: string;\r\n}) {\r\n  const orgRef = await addDoc(collection(db, COLLECTIONS.ORGANIZATIONS), {\r\n    ...data,\r\n    createdAt: serverTimestamp(),\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n\r\n  // Auto-create owner membership\r\n  await setDoc(doc(db, COLLECTIONS.ORGANIZATION_MEMBERS, `${data.createdBy}_${orgRef.id}`), {\r\n    organizationId: orgRef.id,\r\n    userId: data.createdBy,\r\n    role: 'owner',\r\n    createdAt: serverTimestamp(),\r\n  });\r\n\r\n  return orgRef.id;\r\n}\r\n\r\nexport async function getUserOrganizations(userId: string) {\r\n  const membersQuery = query(\r\n    collection(db, COLLECTIONS.ORGANIZATION_MEMBERS),\r\n    where('userId', '==', userId)\r\n  );\r\n  \r\n  const membersSnap = await getDocs(membersQuery);\r\n  const orgIds = membersSnap.docs.map(doc => doc.data().organizationId);\r\n  \r\n  if (orgIds.length === 0) return [];\r\n  \r\n  const orgsQuery = query(\r\n    collection(db, COLLECTIONS.ORGANIZATIONS),\r\n    where('__name__', 'in', orgIds)\r\n  );\r\n  \r\n  const orgsSnap = await getDocs(orgsQuery);\r\n  return orgsSnap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n}\r\n\r\n// Project functions\r\nexport async function createProject(data: {\r\n  organizationId: string;\r\n  name: string;\r\n  key: string;\r\n  description?: string;\r\n  createdBy: string;\r\n}) {\r\n  const projectRef = await addDoc(collection(db, COLLECTIONS.PROJECTS), {\r\n    ...data,\r\n    createdAt: serverTimestamp(),\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n\r\n  // Auto-create default environments\r\n  const environments = [\r\n    { name: 'Development', key: 'dev' },\r\n    { name: 'Staging', key: 'staging' },\r\n    { name: 'Production', key: 'prod' },\r\n  ];\r\n\r\n  for (const env of environments) {\r\n    await addDoc(collection(db, COLLECTIONS.ENVIRONMENTS), {\r\n      projectId: projectRef.id,\r\n      ...env,\r\n      createdAt: serverTimestamp(),\r\n      updatedAt: serverTimestamp(),\r\n    });\r\n  }\r\n\r\n  return projectRef.id;\r\n}\r\n\r\n// Feature flag functions\r\nexport async function createFeatureFlag(data: {\r\n  projectId: string;\r\n  name: string;\r\n  key: string;\r\n  description?: string;\r\n  flagType: 'boolean' | 'multivariate' | 'number' | 'json';\r\n  defaultValue: any;\r\n  tags?: string[];\r\n  createdBy: string;\r\n}) {\r\n  // Create the flag\r\n  const flagRef = await addDoc(collection(db, COLLECTIONS.FEATURE_FLAGS), {\r\n    ...data,\r\n    tags: data.tags || [],\r\n    createdAt: serverTimestamp(),\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n\r\n  // Get all environments for this project\r\n  const envsQuery = query(\r\n    collection(db, COLLECTIONS.ENVIRONMENTS),\r\n    where('projectId', '==', data.projectId)\r\n  );\r\n  const envsSnap = await getDocs(envsQuery);\r\n\r\n  // Create flag_values for each environment\r\n  for (const envDoc of envsSnap.docs) {\r\n    await addDoc(collection(db, COLLECTIONS.FLAG_VALUES), {\r\n      flagId: flagRef.id,\r\n      environmentId: envDoc.id,\r\n      enabled: false,\r\n      value: data.defaultValue,\r\n      updatedAt: serverTimestamp(),\r\n    });\r\n  }\r\n\r\n  return flagRef;\r\n}\r\n\r\n// API Key functions\r\nexport async function createApiKey(data: {\r\n  environmentId: string;\r\n  name: string;\r\n  keyType: 'client' | 'server';\r\n  createdBy: string;\r\n}) {\r\n  const bcrypt = (await import('bcryptjs')).default;\r\n  \r\n  // Generate random key: fsk_{type}_{32-char-random}\r\n  const randomPart = Array.from(crypto.getRandomValues(new Uint8Array(16)))\r\n    .map(b => b.toString(16).padStart(2, '0'))\r\n    .join('');\r\n  const rawKey = `fsk_${data.keyType}_${randomPart}`;\r\n  \r\n  // Hash for storage\r\n  const keyHash = await bcrypt.hash(rawKey, 10);\r\n  \r\n  // Prefix for quick lookup (first 12 chars)\r\n  const keyPrefix = rawKey.substring(0, 12);\r\n  \r\n  // Store in Firestore\r\n  await addDoc(collection(db, COLLECTIONS.API_KEYS), {\r\n    environmentId: data.environmentId,\r\n    name: data.name,\r\n    keyPrefix,\r\n    keyHash,\r\n    keyType: data.keyType,\r\n    revoked: false,\r\n    lastUsedAt: null,\r\n    createdAt: serverTimestamp(),\r\n    createdBy: data.createdBy,\r\n  });\r\n  \r\n  // Return raw key (shown ONCE)\r\n  return rawKey;\r\n}\r\n\r\nexport async function revokeApiKey(keyId: string) {\r\n  const keyRef = doc(db, COLLECTIONS.API_KEYS, keyId);\r\n  await updateDoc(keyRef, {\r\n    revoked: true,\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n}\r\n\r\nexport async function getEnvironmentApiKeys(environmentId: string) {\r\n  const q = query(\r\n    collection(db, COLLECTIONS.API_KEYS),\r\n    where('environmentId', '==', environmentId),\r\n    where('revoked', '==', false)\r\n  );\r\n  const snapshot = await getDocs(q);\r\n  return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n}\r\n\r\n// Audit log function\r\nexport async function createAuditLog(data: {\r\n  organizationId: string;\r\n  projectId?: string;\r\n  environmentId?: string;\r\n  userId: string;\r\n  action: string;\r\n  resourceType: string;\r\n  resourceId: string;\r\n  changes?: any;\r\n  ipAddress?: string;\r\n  userAgent?: string;\r\n}) {\r\n  return await addDoc(collection(db, COLLECTIONS.AUDIT_LOGS), {\r\n    ...data,\r\n    createdAt: serverTimestamp(),\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAUA;;;AAGO,MAAM,cAAc;IACzB,eAAe;IACf,sBAAsB;IACtB,UAAU;IACV,cAAc;IACd,eAAe;IACf,aAAa;IACb,UAAU;IACV,YAAY;AACd;AAGO,eAAe,mBAAmB,IAIxC;IACC,MAAM,SAAS,MAAM,IAAA,kMAAM,EAAC,IAAA,sMAAU,EAAC,iKAAE,EAAE,YAAY,aAAa,GAAG;QACrE,GAAG,IAAI;QACP,WAAW,IAAA,2MAAe;QAC1B,WAAW,IAAA,2MAAe;IAC5B;IAEA,+BAA+B;IAC/B,MAAM,IAAA,kMAAM,EAAC,IAAA,+LAAG,EAAC,iKAAE,EAAE,YAAY,oBAAoB,EAAE,GAAG,KAAK,SAAS,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE,GAAG;QACxF,gBAAgB,OAAO,EAAE;QACzB,QAAQ,KAAK,SAAS;QACtB,MAAM;QACN,WAAW,IAAA,2MAAe;IAC5B;IAEA,OAAO,OAAO,EAAE;AAClB;AAEO,eAAe,qBAAqB,MAAc;IACvD,MAAM,eAAe,IAAA,iMAAK,EACxB,IAAA,sMAAU,EAAC,iKAAE,EAAE,YAAY,oBAAoB,GAC/C,IAAA,iMAAK,EAAC,UAAU,MAAM;IAGxB,MAAM,cAAc,MAAM,IAAA,mMAAO,EAAC;IAClC,MAAM,SAAS,YAAY,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,GAAG,cAAc;IAEpE,IAAI,OAAO,MAAM,KAAK,GAAG,OAAO,EAAE;IAElC,MAAM,YAAY,IAAA,iMAAK,EACrB,IAAA,sMAAU,EAAC,iKAAE,EAAE,YAAY,aAAa,GACxC,IAAA,iMAAK,EAAC,YAAY,MAAM;IAG1B,MAAM,WAAW,MAAM,IAAA,mMAAO,EAAC;IAC/B,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;YAAE,IAAI,IAAI,EAAE;YAAE,GAAG,IAAI,IAAI,EAAE;QAAC,CAAC;AAChE;AAGO,eAAe,cAAc,IAMnC;IACC,MAAM,aAAa,MAAM,IAAA,kMAAM,EAAC,IAAA,sMAAU,EAAC,iKAAE,EAAE,YAAY,QAAQ,GAAG;QACpE,GAAG,IAAI;QACP,WAAW,IAAA,2MAAe;QAC1B,WAAW,IAAA,2MAAe;IAC5B;IAEA,mCAAmC;IACnC,MAAM,eAAe;QACnB;YAAE,MAAM;YAAe,KAAK;QAAM;QAClC;YAAE,MAAM;YAAW,KAAK;QAAU;QAClC;YAAE,MAAM;YAAc,KAAK;QAAO;KACnC;IAED,KAAK,MAAM,OAAO,aAAc;QAC9B,MAAM,IAAA,kMAAM,EAAC,IAAA,sMAAU,EAAC,iKAAE,EAAE,YAAY,YAAY,GAAG;YACrD,WAAW,WAAW,EAAE;YACxB,GAAG,GAAG;YACN,WAAW,IAAA,2MAAe;YAC1B,WAAW,IAAA,2MAAe;QAC5B;IACF;IAEA,OAAO,WAAW,EAAE;AACtB;AAGO,eAAe,kBAAkB,IASvC;IACC,kBAAkB;IAClB,MAAM,UAAU,MAAM,IAAA,kMAAM,EAAC,IAAA,sMAAU,EAAC,iKAAE,EAAE,YAAY,aAAa,GAAG;QACtE,GAAG,IAAI;QACP,MAAM,KAAK,IAAI,IAAI,EAAE;QACrB,WAAW,IAAA,2MAAe;QAC1B,WAAW,IAAA,2MAAe;IAC5B;IAEA,wCAAwC;IACxC,MAAM,YAAY,IAAA,iMAAK,EACrB,IAAA,sMAAU,EAAC,iKAAE,EAAE,YAAY,YAAY,GACvC,IAAA,iMAAK,EAAC,aAAa,MAAM,KAAK,SAAS;IAEzC,MAAM,WAAW,MAAM,IAAA,mMAAO,EAAC;IAE/B,0CAA0C;IAC1C,KAAK,MAAM,UAAU,SAAS,IAAI,CAAE;QAClC,MAAM,IAAA,kMAAM,EAAC,IAAA,sMAAU,EAAC,iKAAE,EAAE,YAAY,WAAW,GAAG;YACpD,QAAQ,QAAQ,EAAE;YAClB,eAAe,OAAO,EAAE;YACxB,SAAS;YACT,OAAO,KAAK,YAAY;YACxB,WAAW,IAAA,2MAAe;QAC5B;IACF;IAEA,OAAO;AACT;AAGO,eAAe,aAAa,IAKlC;IACC,MAAM,SAAS,CAAC,+HAAwB,EAAE,OAAO;IAEjD,mDAAmD;IACnD,MAAM,aAAa,MAAM,IAAI,CAAC,OAAO,eAAe,CAAC,IAAI,WAAW,MACjE,GAAG,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,MACpC,IAAI,CAAC;IACR,MAAM,SAAS,CAAC,IAAI,EAAE,KAAK,OAAO,CAAC,CAAC,EAAE,YAAY;IAElD,mBAAmB;IACnB,MAAM,UAAU,MAAM,OAAO,IAAI,CAAC,QAAQ;IAE1C,2CAA2C;IAC3C,MAAM,YAAY,OAAO,SAAS,CAAC,GAAG;IAEtC,qBAAqB;IACrB,MAAM,IAAA,kMAAM,EAAC,IAAA,sMAAU,EAAC,iKAAE,EAAE,YAAY,QAAQ,GAAG;QACjD,eAAe,KAAK,aAAa;QACjC,MAAM,KAAK,IAAI;QACf;QACA;QACA,SAAS,KAAK,OAAO;QACrB,SAAS;QACT,YAAY;QACZ,WAAW,IAAA,2MAAe;QAC1B,WAAW,KAAK,SAAS;IAC3B;IAEA,8BAA8B;IAC9B,OAAO;AACT;AAEO,eAAe,aAAa,KAAa;IAC9C,MAAM,SAAS,IAAA,+LAAG,EAAC,iKAAE,EAAE,YAAY,QAAQ,EAAE;IAC7C,MAAM,UAAU,QAAQ;QACtB,SAAS;QACT,WAAW,IAAA,2MAAe;IAC5B;AACF;AAEO,eAAe,sBAAsB,aAAqB;IAC/D,MAAM,IAAI,IAAA,iMAAK,EACb,IAAA,sMAAU,EAAC,iKAAE,EAAE,YAAY,QAAQ,GACnC,IAAA,iMAAK,EAAC,iBAAiB,MAAM,gBAC7B,IAAA,iMAAK,EAAC,WAAW,MAAM;IAEzB,MAAM,WAAW,MAAM,IAAA,mMAAO,EAAC;IAC/B,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;YAAE,IAAI,IAAI,EAAE;YAAE,GAAG,IAAI,IAAI,EAAE;QAAC,CAAC;AAChE;AAGO,eAAe,eAAe,IAWpC;IACC,OAAO,MAAM,IAAA,kMAAM,EAAC,IAAA,sMAAU,EAAC,iKAAE,EAAE,YAAY,UAAU,GAAG;QAC1D,GAAG,IAAI;QACP,WAAW,IAAA,2MAAe;IAC5B;AACF"}},
    {"offset": {"line": 317, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tr/Desktop/flagship/apps/dashboard/app/dashboard/%5Bslug%5D/projects/%5BprojectKey%5D/api-keys/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { onAuthStateChanged, User } from 'firebase/auth';\r\nimport { auth, db } from '@/lib/firebase';\r\nimport { useRouter, useParams } from 'next/navigation';\r\nimport { collection, query, where, getDocs } from 'firebase/firestore';\r\nimport { COLLECTIONS, createApiKey, revokeApiKey, getEnvironmentApiKeys } from '@/lib/firestore';\r\n\r\ninterface Project {\r\n  id: string;\r\n  name: string;\r\n  key: string;\r\n}\r\n\r\ninterface Environment {\r\n  id: string;\r\n  name: string;\r\n  key: string;\r\n}\r\n\r\ninterface ApiKey {\r\n  id: string;\r\n  name: string;\r\n  keyPrefix: string;\r\n  keyType: 'client' | 'server';\r\n  createdAt: any;\r\n  lastUsedAt: any;\r\n}\r\n\r\nexport default function ApiKeysPage() {\r\n  const params = useParams();\r\n  const slug = params.slug as string;\r\n  const projectKey = params.projectKey as string;\r\n  const router = useRouter();\r\n  \r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [project, setProject] = useState<Project | null>(null);\r\n  const [environments, setEnvironments] = useState<Environment[]>([]);\r\n  const [selectedEnv, setSelectedEnv] = useState<string>('');\r\n  const [apiKeys, setApiKeys] = useState<ApiKey[]>([]);\r\n  const [showCreateForm, setShowCreateForm] = useState(false);\r\n  const [formData, setFormData] = useState({ name: '', keyType: 'server' as const });\r\n  const [creating, setCreating] = useState(false);\r\n  const [generatedKey, setGeneratedKey] = useState<string>('');\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n      if (user) {\r\n        setUser(user);\r\n        await loadProject();\r\n      } else {\r\n        router.push('/login');\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [router, projectKey]);\r\n\r\n  useEffect(() => {\r\n    if (selectedEnv) {\r\n      loadApiKeys();\r\n    }\r\n  }, [selectedEnv]);\r\n\r\n  const loadProject = async () => {\r\n    try {\r\n      const q = query(collection(db, COLLECTIONS.PROJECTS), where('key', '==', projectKey));\r\n      const snapshot = await getDocs(q);\r\n      \r\n      if (!snapshot.empty) {\r\n        const projectData = { id: snapshot.docs[0].id, ...snapshot.docs[0].data() } as Project;\r\n        setProject(projectData);\r\n        await loadEnvironments(projectData.id);\r\n      } else {\r\n        router.push(`/dashboard/${slug}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading project:', error);\r\n    }\r\n  };\r\n\r\n  const loadEnvironments = async (projectId: string) => {\r\n    try {\r\n      const q = query(collection(db, COLLECTIONS.ENVIRONMENTS), where('projectId', '==', projectId));\r\n      const snapshot = await getDocs(q);\r\n      const envList = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Environment[];\r\n      setEnvironments(envList);\r\n      if (envList.length > 0) {\r\n        setSelectedEnv(envList[0].id);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading environments:', error);\r\n    }\r\n  };\r\n\r\n  const loadApiKeys = async () => {\r\n    try {\r\n      const keys = await getEnvironmentApiKeys(selectedEnv);\r\n      setApiKeys(keys as ApiKey[]);\r\n    } catch (error) {\r\n      console.error('Error loading API keys:', error);\r\n    }\r\n  };\r\n\r\n  const handleCreateKey = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!user) return;\r\n\r\n    setCreating(true);\r\n    try {\r\n      const rawKey = await createApiKey({\r\n        environmentId: selectedEnv,\r\n        name: formData.name,\r\n        keyType: formData.keyType,\r\n        createdBy: user.uid,\r\n      });\r\n\r\n      setGeneratedKey(rawKey);\r\n      setFormData({ name: '', keyType: 'server' });\r\n      await loadApiKeys();\r\n    } catch (error: any) {\r\n      console.error('Error creating API key:', error);\r\n      alert('Hata: ' + error.message);\r\n    } finally {\r\n      setCreating(false);\r\n    }\r\n  };\r\n\r\n  const handleRevoke = async (keyId: string) => {\r\n    if (!confirm('Bu API key\\'i iptal etmek istediğinize emin misiniz?')) return;\r\n\r\n    try {\r\n      await revokeApiKey(keyId);\r\n      await loadApiKeys();\r\n    } catch (error) {\r\n      console.error('Error revoking key:', error);\r\n    }\r\n  };\r\n\r\n  const copyToClipboard = () => {\r\n    navigator.clipboard.writeText(generatedKey);\r\n    setCopied(true);\r\n    setTimeout(() => setCopied(false), 2000);\r\n  };\r\n\r\n  const closeKeyModal = () => {\r\n    setGeneratedKey('');\r\n    setShowCreateForm(false);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-gray-600\">Yükleniyor...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!project) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <nav className=\"bg-white shadow\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex justify-between h-16\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <button\r\n                onClick={() => router.push(`/dashboard/${slug}/projects/${projectKey}`)}\r\n                className=\"text-gray-600 hover:text-gray-900\"\r\n              >\r\n                ← Geri\r\n              </button>\r\n              <h1 className=\"text-xl font-bold text-gray-900\">{project.name} - API Keys</h1>\r\n            </div>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <span className=\"text-gray-700\">{user?.email}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      <main className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\r\n        <div className=\"px-4 py-6 sm:px-0\">\r\n          {/* Environment Selector */}\r\n          <div className=\"mb-6\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Environment</label>\r\n            <div className=\"flex space-x-2\">\r\n              {environments.map((env) => (\r\n                <button\r\n                  key={env.id}\r\n                  onClick={() => setSelectedEnv(env.id)}\r\n                  className={`px-4 py-2 rounded-md font-medium transition-colors ${\r\n                    selectedEnv === env.id\r\n                      ? 'bg-blue-600 text-white'\r\n                      : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'\r\n                  }`}\r\n                >\r\n                  {env.name}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Header */}\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">API Keys</h2>\r\n            <button\r\n              onClick={() => setShowCreateForm(!showCreateForm)}\r\n              disabled={!!generatedKey}\r\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium disabled:opacity-50\"\r\n            >\r\n              {showCreateForm ? 'İptal' : '+ Yeni API Key'}\r\n            </button>\r\n          </div>\r\n\r\n          {/* Generated Key Modal */}\r\n          {generatedKey && (\r\n            <div className=\"bg-green-50 border-2 border-green-500 rounded-lg p-6 mb-6\">\r\n              <h3 className=\"text-lg font-semibold text-green-900 mb-2\">\r\n                ✅ API Key Oluşturuldu!\r\n              </h3>\r\n              <p className=\"text-sm text-green-800 mb-4\">\r\n                Bu key sadece bir kez gösterilecek. Lütfen güvenli bir yerde saklayın.\r\n              </p>\r\n              <div className=\"bg-white border border-green-300 rounded p-4 mb-4\">\r\n                <code className=\"text-sm text-gray-900 break-all\">{generatedKey}</code>\r\n              </div>\r\n              <div className=\"flex space-x-2\">\r\n                <button\r\n                  onClick={copyToClipboard}\r\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium\"\r\n                >\r\n                  {copied ? '✓ Kopyalandı' : 'Kopyala'}\r\n                </button>\r\n                <button\r\n                  onClick={closeKeyModal}\r\n                  className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 font-medium\"\r\n                >\r\n                  Kapat\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Create Form */}\r\n          {showCreateForm && !generatedKey && (\r\n            <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n              <h3 className=\"text-lg font-semibold mb-4\">Yeni API Key Oluştur</h3>\r\n              <form onSubmit={handleCreateKey} className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Key Adı\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={formData.name}\r\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"Production Mobile App\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Key Tipi\r\n                  </label>\r\n                  <select\r\n                    value={formData.keyType}\r\n                    onChange={(e) => setFormData({ ...formData, keyType: e.target.value as any })}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    <option value=\"server\">Server-side (tam erişim)</option>\r\n                    <option value=\"client\">Client-side (sadece okuma)</option>\r\n                  </select>\r\n                  <p className=\"text-xs text-gray-500 mt-1\">\r\n                    {formData.keyType === 'server' \r\n                      ? 'Backend uygulamalar için. Tüm flag bilgilerine erişir.'\r\n                      : 'Frontend uygulamalar için. Sadece aktif flag değerlerini döner.'}\r\n                  </p>\r\n                </div>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={creating}\r\n                  className=\"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium disabled:opacity-50\"\r\n                >\r\n                  {creating ? 'Oluşturuluyor...' : 'Oluştur'}\r\n                </button>\r\n              </form>\r\n            </div>\r\n          )}\r\n\r\n          {/* API Keys List */}\r\n          {apiKeys.length === 0 ? (\r\n            <div className=\"bg-white rounded-lg shadow p-8 text-center\">\r\n              <p className=\"text-gray-500 mb-4\">Bu environment için henüz API key oluşturmadınız.</p>\r\n              <button\r\n                onClick={() => setShowCreateForm(true)}\r\n                className=\"text-blue-600 hover:text-blue-700 font-medium\"\r\n              >\r\n                İlk API key'inizi oluşturun →\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Ad\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Prefix\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Tip\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Son Kullanım\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      İşlemler\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {apiKeys.map((key) => (\r\n                    <tr key={key.id} className=\"hover:bg-gray-50\">\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm font-medium text-gray-900\">{key.name}</div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <code className=\"text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded\">\r\n                          {key.keyPrefix}...\r\n                        </code>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <span className={`px-2 py-1 text-xs font-medium rounded ${\r\n                          key.keyType === 'server'\r\n                            ? 'bg-purple-100 text-purple-800'\r\n                            : 'bg-blue-100 text-blue-800'\r\n                        }`}>\r\n                          {key.keyType}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                        {key.lastUsedAt?.toDate?.()?.toLocaleDateString('tr-TR') || 'Hiç kullanılmadı'}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n                        <button\r\n                          onClick={() => handleRevoke(key.id)}\r\n                          className=\"text-red-600 hover:text-red-900 font-medium\"\r\n                        >\r\n                          İptal Et\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}